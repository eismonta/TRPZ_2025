<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–ì—Ä–∞—Ñ—ñ—á–Ω–∏–π –†–µ–¥–∞–∫—Ç–æ—Ä</title>
    <style>
        body { background: #f4f4f4; font-family: Arial, sans-serif; text-align: center; }
        canvas { background: white; border: 2px solid #333; cursor: crosshair; }
        .toolbar { margin: 10px; padding: 10px; background: #ddd; border-radius: 5px; display: inline-block;}
        button { padding: 5px 10px; margin: 0 5px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="toolbar">
        <button onclick="setTool('brush')">–ü–µ–Ω–∑–ª–∏–∫</button>
        <button onclick="setTool('eraser')">–ì—É–º–∫–∞</button>
        <button onclick="clearCanvas()">–û—á–∏—Å—Ç–∏—Ç–∏</button>
        <button onclick="saveToServer()" style="background: #28a745; color: white;">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –≤ –ë–î</button>
    </div>
    <br>
    <canvas id="c" width="800" height="600"></canvas>

    <script>
        const canvas = document.getElementById('c');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let tool = 'brush';

        canvas.onmousedown = (e) => { isDrawing = true; ctx.beginPath(); ctx.moveTo(e.offsetX, e.offsetY); };
        canvas.onmouseup = () => isDrawing = false;
        canvas.onmousemove = (e) => {
            if (!isDrawing) return;
            ctx.lineWidth = 5;
            ctx.lineCap = 'round';
            ctx.strokeStyle = (tool === 'brush') ? 'black' : 'white';
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.stroke();
        };

        function setTool(t) { tool = t; }
        function clearCanvas() { ctx.clearRect(0,0,800,600); }

        function saveToServer() {
            const data = canvas.toDataURL();
            fetch('/api/save', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({name: 'MyDrawing', imageData: data})
            })
            .then(r => r.text())
            .then(msg => alert(msg));
        }
    </script>
</body>
</html>